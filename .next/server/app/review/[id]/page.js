(()=>{var e={};e.id=536,e.ids=[536],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3136:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(4602),r(1506),r(6560);var a=r(3191),s=r(8716),i=r(7922),n=r.n(i),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["review",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4602)),"/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/review/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,6560)),"/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/not-found.tsx"]}],c=["/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/review/[id]/page.tsx"],u="/review/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/review/[id]/page",pathname:"/review/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6916:()=>{},4889:(e,t,r)=>{Promise.resolve().then(r.bind(r,8691))},1126:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},8691:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(326),s=r(7577),i=r(5047),n=r(772),l=r(7863);let o=s.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));o.displayName="Textarea";var d=r(2397),c=r(3273),u=r(5578);let m=(0,u.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),p=(0,u.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),f=(0,u.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function x(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),[r,l]=(0,s.useState)(null),[u,x]=(0,s.useState)(!0),[h,v]=(0,s.useState)(!1),[g,b]=(0,s.useState)("front"),[y,j]=(0,s.useState)(""),[w,N]=(0,s.useState)(1),_=async()=>{try{x(!0);let t=await fetch(`/api/applications/${e.id}`),r=await t.json();l(r.application),r.application.label_images.length>0&&!r.application.label_images.some(e=>e.verification_result)&&k()}catch(e){console.error("Error fetching application:",e)}finally{x(!1)}},k=async()=>{v(!0);try{(await fetch(`/api/applications/${e.id}/verify`,{method:"POST"})).ok?await _():alert("Verification failed")}catch(e){console.error("Verification error:",e),alert("Error during verification")}finally{v(!1)}},P=async r=>{try{(await fetch(`/api/applications/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r,review_notes:y})})).ok?(await _(),("approved"===r||"rejected"===r)&&t.push("/dashboard")):alert("Failed to update status")}catch(e){console.error("Update error:",e),alert("Error updating status")}},A=e=>{if(!e)return"outline";switch(e.type){case"match":return"default";case"soft_mismatch":return"secondary";case"hard_mismatch":case"not_found":return"destructive";default:return"outline"}},C=e=>{if(!e)return null;switch(e.type){case"match":return a.jsx(m,{className:"h-5 w-5 text-green-600"});case"soft_mismatch":return a.jsx(p,{className:"h-5 w-5 text-yellow-600"});case"hard_mismatch":case"not_found":return a.jsx(f,{className:"h-5 w-5 text-red-600"});default:return null}};if(u)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg",children:"Loading application..."})});if(!r)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg text-red-600",children:"Application not found"})});let R=r.label_images.find(e=>e.image_type===g),z=R?.verification_result||{};return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx(n.z,{variant:"ghost",onClick:()=>t.push("/dashboard"),className:"mb-4",children:"â† Back to Dashboard"}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Review Application #",r.id]}),a.jsx("p",{className:"text-gray-600 mt-2",children:r.applicant_name})]}),h&&a.jsx(c.bZ,{className:"mb-4",children:a.jsx(c.X,{children:"Verifying application with AI..."})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Label Images"}),a.jsx("div",{className:"mb-4 flex gap-2",children:r.label_images.map(e=>a.jsx(n.z,{onClick:()=>b(e.image_type),variant:g===e.image_type?"default":"outline",children:e.image_type},e.id))}),R&&(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Confidence:"," ",R.confidence_score?`${(100*R.confidence_score).toFixed(1)}%`:"N/A"]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[a.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>N(Math.max(.5,w-.1)),children:"-"}),(0,a.jsxs)("span",{className:"text-sm w-12 text-center",children:[Math.round(100*w),"%"]}),a.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>N(Math.min(2,w+.1)),children:"+"})]})]}),a.jsx("div",{className:"overflow-auto border rounded",children:R.image_data_base64&&a.jsx("img",{src:`data:${R.mime_type};base64,${R.image_data_base64}`,alt:R.image_type,style:{transform:`scale(${w})`,transformOrigin:"top left"},className:"max-w-full"})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Verification Results"}),0===Object.keys(z).length?a.jsx("div",{className:"text-muted-foreground",children:'No verification results yet. Click "Verify" to process.'}):a.jsx("div",{className:"space-y-3",children:Object.entries(z).map(([e,t])=>a.jsx(c.bZ,{variant:"destructive"===A(t)?"destructive":"default",className:"border-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[C(t),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold capitalize",children:e.replace(/_/g," ")}),t.expected&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[a.jsx("span",{className:"font-medium",children:"Expected:"})," ",t.expected]}),t.extracted&&(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Extracted:"})," ",t.extracted]}),"not_found"===t.type&&a.jsx("div",{className:"text-sm text-destructive mt-1",children:"Field not found on label"})]})]})},e))}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"review-notes",children:"Review Notes"}),a.jsx(o,{id:"review-notes",value:y,onChange:e=>j(e.target.value),rows:3,placeholder:"Add notes about this review..."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(n.z,{onClick:()=>P("approved"),className:"flex-1",variant:"default",children:"Approve"}),a.jsx(n.z,{onClick:()=>P("rejected"),className:"flex-1",variant:"destructive",children:"Reject"}),a.jsx(n.z,{onClick:()=>P("needs_review"),className:"flex-1",variant:"secondary",children:"Flag for Review"})]})]})]})]})]})})}},3273:(e,t,r)=>{"use strict";r.d(t,{X:()=>d,bZ:()=>o});var a=r(326),s=r(7577),i=r(9360),n=r(7863);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef(({className:e,variant:t,...r},s)=>a.jsx("div",{ref:s,role:"alert",className:(0,n.cn)(l({variant:t}),e),...r}));o.displayName="Alert",s.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},772:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var a=r(326),s=r(7577),i=r(4214),n=r(9360),l=r(7863);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...n},d)=>{let c=s?i.g7:"button";return a.jsx(c,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},2397:(e,t,r)=>{"use strict";r.d(t,{_:()=>u});var a=r(326),s=r(7577);r(962);var i=r(4214),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.Z8)(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:i,...n}=e,l=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...n,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),l=s.forwardRef((e,t)=>(0,a.jsx)(n.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var o=r(9360),d=r(7863);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef(({className:e,...t},r)=>a.jsx(l,{ref:r,className:(0,d.cn)(c(),e),...t}));u.displayName=l.displayName},7863:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(1135),s=r(1009);function i(...e){return(0,s.m6)((0,a.W)(e))}},5578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r(7577);let s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},c=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:l,iconNode:c,...u},m)=>(0,a.createElement)("svg",{ref:m,...o,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:s("lucide",n),...!l&&!d(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),u=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...n},o)=>(0,a.createElement)(c,{ref:o,iconNode:t,className:s(`lucide-${i(l(e))}`,`lucide-${e}`,r),...n}));return r.displayName=l(e),r}},5047:(e,t,r)=>{"use strict";var a=r(7389);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s});var a=r(9510);r(7272);let s={title:"Treasury Take Home",description:"Application management and verification system"};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:e})})}},6560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(9510);function s(){return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Could not find requested resource"}),a.jsx("a",{href:"/",className:"text-blue-600 hover:underline",children:"Return Home"})]})}},4602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/review/[id]/page.tsx#default`)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,669,325],()=>r(3136));module.exports=a})();