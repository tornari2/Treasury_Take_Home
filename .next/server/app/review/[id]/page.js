(()=>{var e={};e.id=536,e.ids=[536],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(4602),s(1506),s(6560);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["review",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4602)),"/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/review/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,6560)),"/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/not-found.tsx"]}],c=["/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/review/[id]/page.tsx"],m="/review/[id]/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/review/[id]/page",pathname:"/review/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6916:()=>{},4889:(e,t,s)=>{Promise.resolve().then(s.bind(s,8562))},1126:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5303:()=>{},8562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(326),r=s(7577),i=s(5047);function n(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),[s,n]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)("front"),[p,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(1),b=async()=>{try{d(!0);let t=await fetch(`/api/applications/${e.id}`),s=await t.json();n(s.application),s.application.label_images.length>0&&!s.application.label_images.some(e=>e.verification_result)&&f()}catch(e){console.error("Error fetching application:",e)}finally{d(!1)}},f=async()=>{c(!0);try{(await fetch(`/api/applications/${e.id}/verify`,{method:"POST"})).ok?await b():alert("Verification failed")}catch(e){console.error("Verification error:",e),alert("Error during verification")}finally{c(!1)}},v=async s=>{try{(await fetch(`/api/applications/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,review_notes:p})})).ok?(await b(),("approved"===s||"rejected"===s)&&t.push("/dashboard")):alert("Failed to update status")}catch(e){console.error("Update error:",e),alert("Error updating status")}},y=e=>{if(!e)return"bg-gray-100";switch(e.type){case"match":return"bg-green-100 border-green-300";case"soft_mismatch":return"bg-yellow-100 border-yellow-300";case"hard_mismatch":case"not_found":return"bg-red-100 border-red-300";default:return"bg-gray-100"}},j=e=>{if(!e)return"❓";switch(e.type){case"match":return"✅";case"soft_mismatch":return"⚠️";case"hard_mismatch":case"not_found":return"❌";default:return"❓"}};if(l)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg",children:"Loading application..."})});if(!s)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg text-red-600",children:"Application not found"})});let N=s.label_images.find(e=>e.image_type===m),_=N?.verification_result||{};return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("button",{onClick:()=>t.push("/dashboard"),className:"text-blue-600 hover:text-blue-800 mb-4",children:"← Back to Dashboard"}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Review Application #",s.id]}),a.jsx("p",{className:"text-gray-600 mt-2",children:s.applicant_name})]}),o&&a.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:a.jsx("p",{className:"text-blue-800",children:"Verifying application with AI..."})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Label Images"}),a.jsx("div",{className:"mb-4 flex gap-2",children:s.label_images.map(e=>a.jsx("button",{onClick:()=>u(e.image_type),className:`px-4 py-2 rounded ${m===e.image_type?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:e.image_type},e.id))}),N&&(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Confidence: ",N.confidence_score?`${(100*N.confidence_score).toFixed(1)}%`:"N/A"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>g(Math.max(.5,h-.1)),className:"px-2 py-1 bg-gray-200 rounded",children:"-"}),(0,a.jsxs)("span",{className:"text-sm",children:[Math.round(100*h),"%"]}),a.jsx("button",{onClick:()=>g(Math.min(2,h+.1)),className:"px-2 py-1 bg-gray-200 rounded",children:"+"})]})]}),a.jsx("div",{className:"overflow-auto border rounded",children:N.image_data_base64&&a.jsx("img",{src:`data:${N.mime_type};base64,${N.image_data_base64}`,alt:N.image_type,style:{transform:`scale(${h})`,transformOrigin:"top left"},className:"max-w-full"})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Verification Results"}),0===Object.keys(_).length?a.jsx("div",{className:"text-gray-500",children:'No verification results yet. Click "Verify" to process.'}):a.jsx("div",{className:"space-y-3",children:Object.entries(_).map(([e,t])=>a.jsx("div",{className:`p-3 border-2 rounded ${y(t)}`,children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-xl",children:j(t)}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold capitalize",children:e.replace(/_/g," ")}),t.expected&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[a.jsx("span",{className:"font-medium",children:"Expected:"})," ",t.expected]}),t.extracted&&(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Extracted:"})," ",t.extracted]}),"not_found"===t.type&&a.jsx("div",{className:"text-sm text-red-600 mt-1",children:"Field not found on label"})]})]})},e))}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),a.jsx("textarea",{value:p,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Add notes about this review..."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>v("approved"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Approve"}),a.jsx("button",{onClick:()=>v("rejected"),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Reject"}),a.jsx("button",{onClick:()=>v("needs_review"),className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Flag for Review"})]})]})]})]})]})})}},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>r});var a=s(9510);s(7272);let r={title:"Treasury Take Home",description:"Application management and verification system"};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:e})})}},6560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);function r(){return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Could not find requested resource"}),a.jsx("a",{href:"/",className:"text-blue-600 hover:underline",children:"Return Home"})]})}},4602:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/michaeltornaritis/Desktop/Treasury_Take_Home/app/review/[id]/page.tsx#default`)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,669],()=>s(3136));module.exports=a})();