"use strict";exports.id=335,exports.ids=[335],exports.modules={5001:(e,t,a)=>{a.d(t,{H:()=>i});var n=a(5066);function i(e,t=[]){let a;try{a=JSON.parse(e.application_data||e.expected_label_data||"{}")}catch{a={}}if(e.expected_label_data&&!e.application_data){let i=a,l="",r="";if(i.producer_address){let e=i.producer_address.split(",").map(e=>e.trim());e.length>=2?(l=e[e.length-2]||"",r=e[e.length-1]||""):1===e.length&&(l=e[0])}return{id:String(e.id),beverageType:e.beverage_type,originType:i.originType||function(e){if(!e)return n.F.DOMESTIC;let t=e.toLowerCase().trim();return["united states","usa","us","america","american"].some(e=>t.includes(e))?n.F.DOMESTIC:n.F.IMPORTED}(i.country_of_origin||""),brandName:i.brand_name||"",fancifulName:i.fanciful_name||null,producerName:i.producer_name||"",producerAddress:{city:l,state:r},appellation:i.appellation_of_origin||null,varietal:i.varietal||i.class_type||null,vintageDate:i.vintage_date||null,labelImages:t.map(e=>String(e))}}return{id:String(e.id),ttbId:a.ttbId||null,beverageType:a.beverageType||e.beverage_type,originType:a.originType||n.F.DOMESTIC,brandName:a.brandName||"",fancifulName:a.fancifulName||null,producerName:a.producerName||"",producerAddress:a.producerAddress||{city:"",state:""},appellation:a.appellation||null,varietal:a.varietal||null,vintageDate:a.vintageDate||null,labelImages:a.labelImages||t.map(e=>String(e))}}},5185:(e,t,a)=>{a.d(t,{M1:()=>i,c8:()=>r,uH:()=>l});var n=a(9487);(0,a(5176).T)();let i={create:(e,t,a,i=null)=>n.Z.prepare(`
      INSERT INTO applications (applicant_name, beverage_type, application_data, assigned_agent_id)
      VALUES (?, ?, ?, ?)
    `).run(e,t,a,i),findById:e=>n.Z.prepare("SELECT * FROM applications WHERE id = ?").get(e),findAll:()=>n.Z.prepare("SELECT * FROM applications ORDER BY created_at DESC").all(),findByStatus:e=>n.Z.prepare("SELECT * FROM applications WHERE status = ? ORDER BY created_at DESC").all(e),updateStatus:(e,t,a=null)=>n.Z.prepare(`
      UPDATE applications 
      SET status = ?, reviewed_at = CURRENT_TIMESTAMP, review_notes = ?
      WHERE id = ?
    `).run(t,a,e)},l={create:(e,t,a,i)=>n.Z.prepare(`
      INSERT INTO label_images (application_id, image_type, image_data, mime_type)
      VALUES (?, ?, ?, ?)
    `).run(e,t,a,i),findByApplicationId:e=>n.Z.prepare("SELECT * FROM label_images WHERE application_id = ?").all(e),updateExtraction:(e,t,a,i,l)=>n.Z.prepare(`
      UPDATE label_images 
      SET extracted_data = ?, verification_result = ?, confidence_score = ?, 
          processed_at = CURRENT_TIMESTAMP, processing_time_ms = ?
      WHERE id = ?
    `).run(t,a,i,l,e)},r={create:(e,t,a=null,i=null)=>n.Z.prepare(`
      INSERT INTO audit_logs (user_id, application_id, action, details)
      VALUES (?, ?, ?, ?)
    `).run(e,a,t,i),findByUserId:(e,t=100)=>n.Z.prepare(`
      SELECT * FROM audit_logs 
      WHERE user_id = ? 
      ORDER BY timestamp DESC 
      LIMIT ?
    `).all(e,t),findByApplicationId:e=>n.Z.prepare(`
      SELECT * FROM audit_logs 
      WHERE application_id = ? 
      ORDER BY timestamp DESC
    `).all(e)}},9487:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(5890),i=a.n(n),l=a(5315),r=a.n(l),s=a(2048),o=a.n(s);let c=process.env.DATABASE_PATH||"./data/database.db",u=null,d="phase-production-build"===process.env.NEXT_PHASE?new Proxy({},{get:()=>()=>{throw Error("Database not available during build")}}):new Proxy({},{get(e,t){let a=function(){if(!u){if("phase-production-build"===process.env.NEXT_PHASE)throw Error("Database initialization skipped during build phase");try{let e=r().dirname(c);o().existsSync(e)||o().mkdirSync(e,{recursive:!0}),(u=new(i())(c)).pragma("foreign_keys = ON")}catch(e){throw e}}return u}(),n=a[t];return"function"==typeof n?n.bind(a):n}})},5176:(e,t,a)=>{a.d(t,{T:()=>l});var n=a(9487);let i=!1;function l(){if(!i)try{(function(){n.Z.exec(`
    CREATE TABLE IF NOT EXISTS users (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      email TEXT UNIQUE NOT NULL,
      password_hash TEXT NOT NULL,
      name TEXT NOT NULL,
      role TEXT NOT NULL DEFAULT 'agent' CHECK(role IN ('agent', 'admin')),
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      last_login DATETIME
    )
  `),n.Z.exec(`
    CREATE TABLE IF NOT EXISTS applications (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      applicant_name TEXT NOT NULL,
      beverage_type TEXT NOT NULL CHECK(beverage_type IN ('spirits', 'wine', 'beer')),
      status TEXT NOT NULL DEFAULT 'pending' CHECK(status IN ('pending', 'needs_review', 'approved', 'rejected')),
      assigned_agent_id INTEGER,
      application_data TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      reviewed_at DATETIME,
      review_notes TEXT,
      FOREIGN KEY (assigned_agent_id) REFERENCES users(id)
    )
  `);try{n.Z.exec(`
      ALTER TABLE applications 
      RENAME COLUMN expected_label_data TO application_data
    `)}catch(e){}n.Z.exec(`
    CREATE TABLE IF NOT EXISTS label_images (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      application_id INTEGER NOT NULL,
      image_type TEXT NOT NULL CHECK(image_type IN ('front', 'back', 'side', 'neck')),
      image_data BLOB NOT NULL,
      mime_type TEXT NOT NULL,
      extracted_data TEXT,
      verification_result TEXT,
      confidence_score REAL,
      processed_at DATETIME,
      processing_time_ms INTEGER,
      FOREIGN KEY (application_id) REFERENCES applications(id) ON DELETE CASCADE
    )
  `),n.Z.exec(`
    CREATE TABLE IF NOT EXISTS audit_logs (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      user_id INTEGER NOT NULL,
      application_id INTEGER,
      action TEXT NOT NULL CHECK(action IN ('login', 'logout', 'viewed', 'verified', 'approved', 'rejected', 'status_changed', 'created')),
      timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
      details TEXT,
      FOREIGN KEY (user_id) REFERENCES users(id),
      FOREIGN KEY (application_id) REFERENCES applications(id) ON DELETE SET NULL
    )
  `),n.Z.exec(`
    CREATE INDEX IF NOT EXISTS idx_applications_status ON applications(status);
    CREATE INDEX IF NOT EXISTS idx_applications_assigned_agent ON applications(assigned_agent_id);
    CREATE INDEX IF NOT EXISTS idx_label_images_application ON label_images(application_id);
    CREATE INDEX IF NOT EXISTS idx_audit_logs_user ON audit_logs(user_id);
    CREATE INDEX IF NOT EXISTS idx_audit_logs_application ON audit_logs(application_id);
    CREATE INDEX IF NOT EXISTS idx_audit_logs_timestamp ON audit_logs(timestamp);
  `)})(),i=!0}catch(e){if(process.env.NEXT_PHASE,e instanceof Error&&e.message.includes("Database not available"))return;throw e}}},354:(e,t,a)=>{a.d(t,{T:()=>l});var n=a(1088);let i=null;async function l(e,t,a){let l=Date.now(),r=e.toString("base64"),s=`data:${t};base64,${r}`,o={brand_name:"Brand name",class_type:"Class/type designation",alcohol_content:"Alcohol content percentage",net_contents:"Net contents (volume)",producer_name:"Producer name",producer_address:"Producer address",producer_name_phrase:'Phrase immediately preceding producer name/address (e.g., "Bottled By", "Imported By", "Imported by", or null if no such phrase)',health_warning:"Government health warning statement (must be exact)"};"spirits"===a?(o.age_statement="Age statement (if applicable)",o.country_of_origin="Country of origin (if imported)"):"wine"===a?(o.appellation_of_origin="Appellation of origin (if applicable)",o.sulfite_declaration="Sulfite declaration",o.country_of_origin="Country of origin (if imported)"):"beer"===a&&(o.sulfite_declaration="Sulfite declaration (if applicable)",o.country_of_origin="Country of origin (if imported)");let c=Object.entries(o).map(([e,t])=>`- ${e}: ${t}`).join("\n");try{let e=function(){if(!i){let e=process.env.OPENAI_API_KEY;if(!e)throw Error("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");i=new n.ZP({apiKey:e})}return i}(),t=await e.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:`You are an expert at extracting structured data from alcohol beverage labels. Extract the following fields from the label image and return them as JSON with confidence scores (0-1) for each field. If a field is not found, omit it from the response. For the health_warning field, extract the EXACT text including case and formatting.

Fields to extract:
${c}

Return JSON in this format:
{
  "brand_name": { "value": "...", "confidence": 0.95 },
  "alcohol_content": { "value": "...", "confidence": 0.92 },
  ...
}`},{role:"user",content:[{type:"text",text:"Extract all label information from this image. Pay special attention to the health warning - it must be extracted exactly as shown, including all caps and formatting."},{type:"image_url",image_url:{url:s}}]}],response_format:{type:"json_object"},max_tokens:2e3}),a=t.choices[0]?.message?.content;if(!a)throw Error("No response from OpenAI");let r=JSON.parse(a),o={};for(let[e,t]of Object.entries(r))t&&"object"==typeof t&&"value"in t&&"confidence"in t&&(o[e]={value:String(t.value),confidence:Number(t.confidence)});let u=Object.values(o).map(e=>e.confidence),d=u.length>0?u.reduce((e,t)=>e+t,0)/u.length:0,p=Date.now()-l;return{extractedData:o,confidence:d,processingTimeMs:p}}catch(e){throw console.error("OpenAI extraction error:",e),e}}},5066:(e,t,a)=>{a.d(t,{F:()=>n.F,vS:()=>L});var n=a(6101);let i="GOVERNMENT WARNING: (1) ACCORDING TO THE SURGEON GENERAL, WOMEN SHOULD NOT DRINK ALCOHOLIC BEVERAGES DURING PREGNANCY BECAUSE OF THE RISK OF BIRTH DEFECTS. (2) CONSUMPTION OF ALCOHOLIC BEVERAGES IMPAIRS YOUR ABILITY TO DRIVE A CAR OR OPERATE MACHINERY, AND MAY CAUSE HEALTH PROBLEMS.",l=[/^\d+(\.\d+)?%\s*Alc\.?\s*\/?\s*Vol\.?$/i,/^Alcohol\s+\d+(\.\d+)?%\s*(by\s+)?Vol(ume)?\.?$/i,/^Alc\.?\s+\d+(\.\d+)?%\s*(by\s+)?Vol\.?$/i,/^\d+(\.\d+)?%\s*Alcohol\s+(by\s+)?Vol(ume)?\.?$/i],r={metric:[/^\d+(\.\d+)?\s*m[Ll]\.?$/i,/^\d+(\.\d+)?\s*[Ll]\.?$/,/^\d+(\.\d+)?\s*[Ll]iter(s)?$/i,/^\d+(\.\d+)?\s*[Ll]itre(s)?$/i],usCustomary:[/^\d+(\.\d+)?\s*fl\.?\s*oz\.?$/i,/^\d+(\.\d+)?\s*fluid\s+ounce(s)?$/i,/^\d+(\.\d+)?\s*pint(s)?$/i,/^\d+(\.\d+)?\s*quart(s)?$/i,/^\d+(\.\d+)?\s*gallon(s)?$/i]},s=/^\d+(\.\d+)?\s*$/,o=[3750,3e3,2e3,1800,1750,1500,1e3,945,900,750,720,710,700,570,500,475,375,355,350,331,250,200,187,100,50],c=[3e3,2250,1800,1500,1e3,750,720,700,620,600,568,550,500,473,375,360,355,330,300,250,200,187,180,100,50],u={AL:"alabama",AK:"alaska",AZ:"arizona",AR:"arkansas",CA:"california",CO:"colorado",CT:"connecticut",DE:"delaware",FL:"florida",GA:"georgia",HI:"hawaii",ID:"idaho",IL:"illinois",IN:"indiana",IA:"iowa",KS:"kansas",KY:"kentucky",LA:"louisiana",ME:"maine",MD:"maryland",MA:"massachusetts",MI:"michigan",MN:"minnesota",MS:"mississippi",MO:"missouri",MT:"montana",NE:"nebraska",NV:"nevada",NH:"new hampshire",NJ:"new jersey",NM:"new mexico",NY:"new york",NC:"north carolina",ND:"north dakota",OH:"ohio",OK:"oklahoma",OR:"oregon",PA:"pennsylvania",RI:"rhode island",SC:"south carolina",SD:"south dakota",TN:"tennessee",TX:"texas",UT:"utah",VT:"vermont",VA:"virginia",WA:"washington",WV:"west virginia",WI:"wisconsin",WY:"wyoming",DC:"district of columbia"},d=Object.fromEntries(Object.entries(u).map(([e,t])=>[t,e]));function p(e){return e?e.trim().replace(/\s+/g," ").toLowerCase():""}function m(e){return e?e.trim().replace(/\s+/g," "):""}function f(e,t){return p(e)===p(t)}function E(e,t){if(!e||!t)return!1;let a=p(e)===p(t),n=m(e)===m(t);return a&&!n}function T(e,t){return!!e&&t.some(t=>t.test(e.trim()))}function h(e){return null!=e&&""!==e.trim()}function A(e){if(!e)return"";let t=p(e);if(!t)return"";if(d[t])return t;let a=t.toUpperCase();return u[a]?u[a]:t}function N(e,t){if(!e||!t)return!1;let a=A(e),n=A(t);if(a===n)return!0;let i=e.trim().toUpperCase(),l=t.trim().toUpperCase();return!!u[i]&&u[i]===n||!!u[l]&&u[l]===a}function C(e){if(!e)return null;let t=e.trim(),a=t.match(/^(\d+(?:\.\d+)?)/);if(!a)return null;let n=parseFloat(a[1]);return isNaN(n)?null:/^\d+(\.\d+)?\s*[Ll]\.?$/.test(t)||/^\d+(\.\d+)?\s*[Ll]iter(s)?$/i.test(t)||/^\d+(\.\d+)?\s*[Ll]itre(s)?$/i.test(t)?1e3*n:/^\d+(\.\d+)?\s*m[Ll]\.?$/i.test(t)?n:null}function g(e){if(!e)return null;let t=e.match(/(\d+(?:\.\d+)?)\s*%/);if(!t)return null;let a=parseFloat(t[1]);return isNaN(a)?null:a}function _(e,t){let a=e.brandName;return t?f(a,t)?E(a,t)?{field:"brandName",status:n.Gp.SOFT_MISMATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Brand name must match application",details:"Case or formatting difference detected"}:{field:"brandName",status:n.Gp.MATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Brand name must match application"}:{field:"brandName",status:n.Gp.HARD_MISMATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Brand name must match application",details:"Brand names do not match"}:{field:"brandName",status:n.Gp.NOT_FOUND,expected:a,extracted:null,rule:"PRESENCE: Brand name must appear on label"}}function S(e,t){let a=e.fancifulName,i=h(a),l=h(t);return i||l?i&&!l?{field:"fancifulName",status:n.Gp.HARD_MISMATCH,expected:a,extracted:null,rule:"CROSS-CHECK: Fanciful name in application must appear on label",details:"Application specifies a fanciful name but it was not found on the label"}:!i&&l?{field:"fancifulName",status:n.Gp.HARD_MISMATCH,expected:null,extracted:t,rule:"CROSS-CHECK: Fanciful name on label must be in application",details:"Label contains a fanciful name not listed in the application"}:f(a,t)?E(a,t)?{field:"fancifulName",status:n.Gp.SOFT_MISMATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Fanciful name must match application",details:"Case or formatting difference detected"}:{field:"fancifulName",status:n.Gp.MATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Fanciful name must match application"}:{field:"fancifulName",status:n.Gp.HARD_MISMATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Fanciful name must match application",details:"Fanciful names do not match"}:{field:"fancifulName",status:n.Gp.NOT_APPLICABLE,expected:null,extracted:null,rule:"CROSS-CHECK: Fanciful name not present in application or on label"}}function R(e){return e?{field:"classType",status:n.Gp.MATCH,expected:null,extracted:e,rule:"PRESENCE: Class/type designation present on label"}:{field:"classType",status:n.Gp.NOT_FOUND,expected:null,extracted:null,rule:"PRESENCE: Class/type designation must appear on label"}}function b(e,t,a){let i='Format: "XX% Alc/Vol", "Alcohol XX% by Volume", "Alc. XX% by Vol", or "XX% Alcohol by Volume"',r=g(e);if(t===n.c_.BEER){if(!e)return{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:i,extracted:null,rule:"PRESENCE: Alcohol content must appear on label",details:"Alcohol content is required for beer/malt beverages"};let t=function(e,t,a,n){let i=[e,t,a,n].filter(Boolean).join(" ").toLowerCase();return{hasLowAlcohol:/\blow\s+alcohol\b/i.test(i),hasReducedAlcohol:/\breduced\s+alcohol\b/i.test(i),hasNonAlcoholic:/\bnon[-\s]?alcoholic\b/i.test(i),hasAlcoholFree:/\balcohol[-\s]?free\b/i.test(i)}}(e,a?.classType||null,a?.brandName||null,a?.fancifulName||null);if(t.hasLowAlcohol||t.hasReducedAlcohol){if(null===r)return{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:i,extracted:e,rule:'BEER RULE: "Low alcohol" or "Reduced alcohol" requires numerical alcohol content',details:'If "low alcohol" or "reduced alcohol" is used, alcohol content must be stated and must be less than 2.5% ABV'};if(r>=2.5)return{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:'Alcohol content must be less than 2.5% ABV to use "low alcohol" or "reduced alcohol"',extracted:e,rule:'BEER RULE: "Low alcohol" or "Reduced alcohol" may only be used if alcohol content < 2.5% ABV',details:`Alcohol content is ${r}% ABV, which equals or exceeds 2.5% ABV. "Low alcohol" or "reduced alcohol" terms cannot be used.`}}if(t.hasNonAlcoholic&&!/\bcontains\s+less\s+than\s+(0\.5|\.5)\s*%\s*(alcohol\s+)?by\s+volume\b/i.test(e))return{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:'If "non-alcoholic" is used, must include statement: "contains less than 0.5% (or .5%) alcohol by volume"',extracted:e,rule:'BEER RULE: "Non-alcoholic" requires adjacent statement "contains less than 0.5% alcohol by volume"',details:'The term "non-alcoholic" may only be used if the statement "contains less than 0.5% (or .5%) alcohol by volume" appears immediately adjacent to it'};if(t.hasAlcoholFree&&(null===r||r>0))return{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:'Alcohol content must be 0% ABV to use "alcohol free"',extracted:e,rule:'BEER RULE: "Alcohol free" may only be used if beverage contains no alcohol',details:null===r?'Alcohol content must be stated and must be 0% to use "alcohol free"':`Alcohol content is ${r}% ABV. "Alcohol free" may only be used for beverages with 0% alcohol.`};let s=T(e,l);if(!(t.hasLowAlcohol||t.hasReducedAlcohol||t.hasNonAlcoholic||t.hasAlcoholFree)&&!s)return{field:"alcoholContent",status:n.Gp.SOFT_MISMATCH,expected:i,extracted:e,rule:"FORMAT: Alcohol content must use acceptable format",details:'Format may not meet TTB requirements. Accepted formats: "XX% Alc/Vol", "Alcohol XX% by Volume", "Alc. XX% by Vol", or "XX% Alcohol by Volume"'};if((t.hasLowAlcohol||t.hasReducedAlcohol||t.hasAlcoholFree)&&null===r&&!s)return{field:"alcoholContent",status:n.Gp.SOFT_MISMATCH,expected:i,extracted:e,rule:"FORMAT: Alcohol content must use acceptable format or include required statements",details:"Special alcohol terms require numerical alcohol content statement in acceptable format"}}if(t===n.c_.WINE){let t=function(e){if(!e)return!1;let t=p(e);return t.includes("table wine")||t.includes("light wine")||"table wine"===t||"light wine"===t}(a?.classType||null),r=g(e);if(!e)return t?{field:"alcoholContent",status:n.Gp.MATCH,expected:null,extracted:null,rule:'WINE RULE: For wines 7-14% ABV with "table wine" or "light wine" designation, numerical alcohol content statement is optional'}:{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:'Numerical alcohol content statement required. For wines 7-14% ABV, statement is optional if "table wine" or "light wine" appears as class/type designation.',extracted:null,rule:"WINE RULE: Wines over 14% ABV require numerical alcohol content statement",details:'Wines over 14% ABV require a numerical alcohol content statement. Wines 7-14% ABV may omit numerical statement if "table wine" or "light wine" appears as class/type designation.'};if(null!==r){if(r>14&&!T(e,l)||r>=7&&r<=14&&!T(e,l)||r<7&&!T(e,l))return{field:"alcoholContent",status:n.Gp.SOFT_MISMATCH,expected:i,extracted:e,rule:"FORMAT: Alcohol content must use acceptable format",details:'Format may not meet TTB requirements. Accepted formats: "XX% Alc/Vol", "Alcohol XX% by Volume", "Alc. XX% by Vol", or "XX% Alcohol by Volume"'}}else if(!T(e,l))return t?{field:"alcoholContent",status:n.Gp.SOFT_MISMATCH,expected:i,extracted:e,rule:"FORMAT: Alcohol content must use acceptable format",details:"Format may not meet TTB requirements"}:{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:'Numerical alcohol content statement required. For wines 7-14% ABV, statement is optional if "table wine" or "light wine" appears.',extracted:e,rule:"WINE RULE: Wines over 14% ABV require numerical alcohol content statement",details:'No numerical alcohol percentage found. Wines over 14% ABV require numerical statement. Wines 7-14% ABV may omit if "table wine" or "light wine" appears.'}}if(t===n.c_.SPIRITS){if(!e)return{field:"alcoholContent",status:n.Gp.HARD_MISMATCH,expected:i,extracted:null,rule:"PRESENCE: Alcohol content must appear on label",details:"Alcohol content is required for spirits"};if(!T(e,l))return{field:"alcoholContent",status:n.Gp.SOFT_MISMATCH,expected:i,extracted:e,rule:"FORMAT: Alcohol content must use acceptable format",details:'Format may not meet TTB requirements. Accepted formats: "XX% Alc/Vol", "Alcohol XX% by Volume", "Alc. XX% by Vol", or "XX% Alcohol by Volume"'}}return{field:"alcoholContent",status:n.Gp.MATCH,expected:null,extracted:e,rule:"PRESENCE + FORMAT: Alcohol content present and properly formatted"}}function I(e,t){let a=t===n.c_.WINE||t===n.c_.SPIRITS,i=t===n.c_.BEER,l=a?'Metric units required (e.g., "750 mL", "1 L"). U.S. customary units optional.':'U.S. customary units required (e.g., "12 fl oz", "1 pint"). Metric units optional.';if(!e)return{field:"netContents",status:n.Gp.NOT_FOUND,expected:l,extracted:null,rule:"PRESENCE: Net contents must appear on label"};let u=e.trim(),d=T(u,r.metric),p=T(u,r.usCustomary),m=s.test(u);if(a&&m&&!d&&!p)return{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Wine and spirits must use metric units (mL, L)",details:"Number detected but unit missing. Metric units (mL, L) are required for wine and spirits."};if(a&&!d)return p?{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Wine and spirits must use metric units (mL, L). U.S. customary units are optional.",details:"Metric units required for wine/spirits. Found U.S. customary units instead."}:{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Wine and spirits must use metric units (mL, L)",details:"Invalid format. Metric units (mL, L) are required for wine and spirits."};if(i&&!p)return d?{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Beer must use U.S. customary units (fl. oz., pints, quarts, gallons). Metric units are optional.",details:"U.S. customary units required for beer. Found metric units instead."}:{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Beer must use U.S. customary units (fl. oz., pints, quarts, gallons)",details:"Invalid format. U.S. customary units are required for beer."};if(i&&t===n.c_.BEER){let t=function(e){if(!e)return null;let t=function(e){if(!e)return null;let t=e.trim().toLowerCase(),a=0,n=t.match(/(\d+(?:\/\d+)?(?:\.\d+)?)\s*gallon(s)?/i);if(n){let e;let t=n[1];if(t.includes("/")){let[a,n]=t.split("/").map(Number);if(isNaN(a)||isNaN(n)||0===n)return null;e=a/n}else if(isNaN(e=parseFloat(t)))return null;a+=128*e}let i=t.match(/(\d+(?:\/\d+)?(?:\.\d+)?)\s*quart(s)?/i);if(i){let e;let t=i[1];if(t.includes("/")){let[a,n]=t.split("/").map(Number);if(isNaN(a)||isNaN(n)||0===n)return null;e=a/n}else if(isNaN(e=parseFloat(t)))return null;a+=32*e}let l=t.match(/(\d+(?:\/\d+)?(?:\.\d+)?)\s*pint(s)?/i);if(l){let e;let t=l[1];if(t.includes("/")){let[a,n]=t.split("/").map(Number);if(isNaN(a)||isNaN(n)||0===n)return null;e=a/n}else if(isNaN(e=parseFloat(t)))return null;a+=16*e}let r=t.match(/(\d+(?:\/\d+)?(?:\.\d+)?)\s*(?:fl\.?\s*oz\.?|fluid\s+ounce(s)?)/i);if(r){let e;let t=r[1];if(t.includes("/")){let[a,n]=t.split("/").map(Number);if(isNaN(a)||isNaN(n)||0===n)return null;e=a/n}else if(isNaN(e=parseFloat(t)))return null;a+=e}return n||i||l||r?a:null}(e);if(null===t)return null;let a=e.trim().toLowerCase();if(t<16){let t=/fl\.?\s*oz\.?/i.test(e)||/fluid\s+ounce(s)?/i.test(e),a=/pint/i.test(e)&&(/\//.test(e)||/\d+\s*pint/i.test(e));if(!t&&!a)return"For volumes less than 1 pint, net contents must be stated in fluid ounces or fractions of a pint"}if(.01>Math.abs(t-16)){if(!/^1\s+pint(?!\s)/i.test(a)&&!/^1\s+pint\s*$/i.test(a))return'For exactly 1 pint, net contents must be stated as "1 pint"'}else if(.01>Math.abs(t-32)){if(!/^1\s+quart(?!\s)/i.test(a)&&!/^1\s+quart\s*$/i.test(a))return'For exactly 1 quart, net contents must be stated as "1 quart"'}else if(.01>Math.abs(t-128)&&!/^1\s+gallon(?!\s)/i.test(a)&&!/^1\s+gallon\s*$/i.test(a))return'For exactly 1 gallon, net contents must be stated as "1 gallon"';if(t>16&&t<32){let t=/quart/i.test(e)&&(/\//.test(e)||/\d+\s*quart/i.test(e)),a=/pint/i.test(e)&&(/fl\.?\s*oz\.?/i.test(e)||/fluid\s+ounce/i.test(e));if(!t&&!a)return"For volumes more than 1 pint but less than 1 quart, net contents must be stated in fractions of a quart, or in pints and fluid ounces"}if(t>32&&t<128){let t=/gallon/i.test(e)&&(/\//.test(e)||/\d+\s*gallon/i.test(e)),a=/quart/i.test(e)||/pint/i.test(e)&&(/fl\.?\s*oz\.?/i.test(e)||/fluid\s+ounce/i.test(e));if(!t&&!a)return"For volumes more than 1 quart but less than 1 gallon, net contents must be stated in fractions of a gallon, or in quarts, pints, and fluid ounces"}return t>128&&!/gallon/i.test(e)?"For volumes more than 1 gallon, net contents must be stated in gallons and fractions thereof":null}(u);if(t)return{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Beer net contents must follow U.S. standard measure formatting requirements (27 CFR 7.70)",details:t}}if(a){if(t===n.c_.WINE){let t=function(e){if(!e)return null;let t=C(e);if(null===t)return null;let a=t/1e3,n=e.trim().toLowerCase();if(a<4)return null;if(a>=4&&a<=17){if(!Number.isInteger(a))return"For containers 4-17 liters, net contents must be expressed in whole liters (e.g., 4 liters, 5 liters, 6 liters). Decimal portions are not allowed.";let e=Math.floor(a);if(!RegExp(`^${e}\\s*(liter(s)?|l\\.?)$`,"i").test(n))return`For containers 4-17 liters, net contents must be expressed as "${e} liters" or "${e} L" (whole numbers only, no decimals)`}if(a>=18){if((a.toString().split(".")[1]||"").length>2)return"For containers 18 liters or more, net contents must be expressed in liters accurate to the nearest one-hundredth of a liter (maximum 2 decimal places)";if(!/^\d+(\.\d{1,2})?\s*(liter(s)?|l\\.?)$/i.test(n))return"For containers 18 liters or more, net contents must be expressed in liters and decimal portions accurate to the nearest one-hundredth of a liter (e.g., 18.50 liters, 20.25 L)"}return null}(u);if(t)return{field:"netContents",status:n.Gp.HARD_MISMATCH,expected:l,extracted:e,rule:"FORMAT: Wine net contents must follow metric formatting requirements (27 CFR 4.72)",details:t}}let a=C(u);if(null!==a&&!(t===n.c_.SPIRITS?null!==a&&o.some(e=>.01>Math.abs(a-e)):function(e){if(null===e)return!1;if(c.some(t=>.01>Math.abs(e-t)))return!0;if(e>=4e3){let t=e/1e3;return t>=4&&Number.isInteger(t)&&t%1==0}return!1}(a))){let a=t===n.c_.SPIRITS?"spirits":"wine",i=t===n.c_.SPIRITS?"3.75L, 3L, 2L, 1.8L, 1.75L, 1.5L, 1L, 945mL, 900mL, 750mL, 720mL, 710mL, 700mL, 570mL, 500mL, 475mL, 375mL, 355mL, 350mL, 331mL, 250mL, 200mL, 187mL, 100mL, 50mL":"3L, 2.25L, 1.8L, 1.5L, 1L, 750mL, 720mL, 700mL, 620mL, 600mL, 568mL, 550mL, 500mL, 473mL, 375mL, 360mL, 355mL, 330mL, 300mL, 250mL, 200mL, 187mL, 180mL, 100mL, 50mL (or even liters â‰¥4L)";return{field:"netContents",status:n.Gp.SOFT_MISMATCH,expected:`${l} Must match authorized standards of fill: ${i}`,extracted:e,rule:`STANDARDS OF FILL: ${a.charAt(0).toUpperCase()+a.slice(1)} must use authorized container sizes`,details:`Volume ${u} does not match authorized standards of fill for ${a}. This requires review.`}}}return{field:"netContents",status:n.Gp.MATCH,expected:l,extracted:e,rule:a?"PRESENCE + FORMAT: Net contents present with required metric units (U.S. customary optional)":"PRESENCE + FORMAT: Net contents present with required U.S. customary units (metric optional)"}}function O(e,t,a,i){let l=e.producerName,r=e.producerAddress.city,s=e.producerAddress.state;if(!t&&!a)return{field:"producerNameAddress",status:n.Gp.NOT_FOUND,expected:`${l}, ${r}, ${s}`,extracted:null,rule:"PRESENCE: Producer name and location (city, state) must appear on label"};let o=t&&f(l,t),c=t&&E(l,t),u=a&&p(a).includes(p(r)),d=!1;if(a){let e=p(a),t=e.split(",").map(e=>e.trim());if(N(t[t.length-1]||"",s))d=!0;else if(N(e.split(/\s+/).slice(-2).join(" "),s))d=!0;else for(let t of e.split(/[,\s]+/))if(N(t,s)){d=!0;break}}if(!o&&t)return{field:"producerNameAddress",status:n.Gp.HARD_MISMATCH,expected:`${l}, ${r}, ${s}`,extracted:`${t||""}, ${a||""}`,rule:"CROSS-CHECK: Producer name must match application",details:"Producer name does not match"};if(!u||!d)return{field:"producerNameAddress",status:n.Gp.HARD_MISMATCH,expected:`${l}, ${r}, ${s}`,extracted:`${t||""}, ${a||""}`,rule:"CROSS-CHECK: City and state must match application (street address not validated)",details:'City or state does not match (note: state abbreviations are equivalent to full names, e.g., "ME" = "Maine")'};let m=i?.beverageType,T=i?.producerNamePhrase,h=e.originType===n.F.IMPORTED;if(m&&t&&a){if(m===n.c_.SPIRITS||m===n.c_.WINE){let e=T?p(T):"",i=/bottled\s+by/i.test(e),o=/imported\s+by/i.test(e);if(!i&&!o)return{field:"producerNameAddress",status:n.Gp.SOFT_MISMATCH,expected:`${l}, ${r}, ${s}`,extracted:`${t||""}, ${a||""}`,rule:'FORMAT: Producer name and address must immediately follow "Bottled By" or "Imported By" with no intervening text',details:'Producer name/address should immediately follow "Bottled By" or "Imported By" phrase. No such phrase detected or intervening text may be present.'}}if(m===n.c_.BEER&&h){let e=T?p(T):"";if(!/imported\s+by/i.test(e))return{field:"producerNameAddress",status:n.Gp.SOFT_MISMATCH,expected:`${l}, ${r}, ${s}`,extracted:`${t||""}, ${a||""}`,rule:'FORMAT: Importer name and address must immediately follow "Imported by" or similar phrase with no intervening text',details:'Importer name/address should immediately follow "Imported by" or similar phrase. No such phrase detected or intervening text may be present.'}}}return c?{field:"producerNameAddress",status:n.Gp.SOFT_MISMATCH,expected:`${l}, ${r}, ${s}`,extracted:`${t||""}, ${a||""}`,rule:"CROSS-CHECK: Producer name, city, and state must match application",details:"Minor formatting difference in name"}:{field:"producerNameAddress",status:n.Gp.MATCH,expected:`${l}, ${r}, ${s}`,extracted:`${t||""}, ${a||""}`,rule:"CROSS-CHECK: Producer name, city, and state match application"}}function M(e,t){return e?e&&m(e)===m(i)?!1===t.governmentWarningAllCaps?{field:"healthWarning",status:n.Gp.HARD_MISMATCH,expected:'"GOVERNMENT WARNING" must be in ALL CAPS',extracted:e,rule:'FORMAT: "GOVERNMENT WARNING" must be in capital letters',details:'"GOVERNMENT WARNING" is not in all caps'}:!1===t.governmentWarningBold?{field:"healthWarning",status:n.Gp.HARD_MISMATCH,expected:'"GOVERNMENT WARNING" must be bold',extracted:e,rule:'FORMAT: "GOVERNMENT WARNING" must be in bold type',details:'"GOVERNMENT WARNING" is not bold'}:!1===t.surgeonCapitalized?{field:"healthWarning",status:n.Gp.HARD_MISMATCH,expected:'"Surgeon" must have capital S',extracted:e,rule:'FORMAT: "Surgeon" must be capitalized',details:'"Surgeon" is not capitalized'}:!1===t.generalCapitalized?{field:"healthWarning",status:n.Gp.HARD_MISMATCH,expected:'"General" must have capital G',extracted:e,rule:'FORMAT: "General" must be capitalized',details:'"General" is not capitalized'}:{field:"healthWarning",status:n.Gp.MATCH,expected:i,extracted:e,rule:"PRESENCE + FORMAT: Health warning present with exact required text and formatting"}:{field:"healthWarning",status:n.Gp.HARD_MISMATCH,expected:i,extracted:e,rule:"FORMAT: Health warning must match EXACT required text word-for-word",details:"The entire government warning text does not match the required wording exactly"}:{field:"healthWarning",status:n.Gp.NOT_FOUND,expected:i,extracted:null,rule:"PRESENCE: Health warning statement must appear on label"}}function y(e,t){return e===n.F.DOMESTIC?{field:"countryOfOrigin",status:n.Gp.NOT_APPLICABLE,expected:"N/A - Domestic",extracted:null,rule:"PRESENCE: Country of origin not required for domestic products"}:t?{field:"countryOfOrigin",status:n.Gp.MATCH,expected:null,extracted:t,rule:"PRESENCE: Country of origin present on label"}:{field:"countryOfOrigin",status:n.Gp.NOT_FOUND,expected:"Country of origin required for imported products",extracted:null,rule:"PRESENCE: Country of origin must appear on label for imported products"}}function x(e,t=[]){let a=e.filter(e=>e.status!==n.Gp.NOT_APPLICABLE);return a.some(e=>e.status===n.Gp.HARD_MISMATCH||e.status===n.Gp.NOT_FOUND&&!t.includes(e.field))?n.Gp.HARD_MISMATCH:a.some(e=>e.status===n.Gp.SOFT_MISMATCH)?n.Gp.SOFT_MISMATCH:n.Gp.MATCH}function L(e,t){switch(e.beverageType){case n.c_.BEER:return function(e,t){let a=Date.now(),i=[],{extraction:l,formatChecks:r}=t;i.push(_(e,l.brandName)),i.push(S(e,l.fancifulName)),i.push(R(l.classType)),i.push(I(l.netContents,n.c_.BEER)),i.push(O(e,l.producerName,l.producerAddress,{beverageType:n.c_.BEER,producerNamePhrase:l.producerNamePhrase})),i.push(M(l.healthWarningText,r)),i.push(y(e.originType,l.countryOfOrigin)),i.push(b(l.alcoholContent,n.c_.BEER,{classType:l.classType,brandName:l.brandName,fancifulName:l.fancifulName}));let s=[{field:"colorAdditiveDisclosure",value:l.colorAdditiveDisclosure,present:h(l.colorAdditiveDisclosure)},{field:"sulfiteDeclaration",value:l.sulfiteDeclaration,present:h(l.sulfiteDeclaration)},{field:"aspartameDeclaration",value:l.aspartameDeclaration,present:h(l.aspartameDeclaration)}];return{applicationId:e.id,beverageType:n.c_.BEER,overallStatus:x(i),fieldResults:i,surfacedFields:s,timestamp:new Date().toISOString(),processingTimeMs:Date.now()-a}}(e,t);case n.c_.SPIRITS:return function(e,t){var a;let i=Date.now(),l=[],{extraction:r,formatChecks:s}=t;l.push(_(e,r.brandName)),l.push(S(e,r.fancifulName)),l.push(R(r.classType)),l.push(b(r.alcoholContent,n.c_.SPIRITS)),l.push(I(r.netContents,n.c_.SPIRITS)),l.push(O(e,r.producerName,r.producerAddress,{beverageType:n.c_.SPIRITS,producerNamePhrase:r.producerNamePhrase})),l.push(M(r.healthWarningText,s)),l.push(y(e.originType,r.countryOfOrigin)),l.push((a=r.ageStatement)?{field:"ageStatement",status:n.Gp.MATCH,expected:null,extracted:a,rule:"PRESENCE: Age statement present on label"}:{field:"ageStatement",status:n.Gp.NOT_FOUND,expected:"Age statement required on spirits labels",extracted:null,rule:"PRESENCE: Age statement must appear on spirits label"});let o=[{field:"colorIngredientDisclosure",value:r.colorIngredientDisclosure,present:h(r.colorIngredientDisclosure)},{field:"commodityStatement",value:r.commodityStatement,present:h(r.commodityStatement)}];return{applicationId:e.id,beverageType:n.c_.SPIRITS,overallStatus:x(l),fieldResults:l,surfacedFields:o,timestamp:new Date().toISOString(),processingTimeMs:Date.now()-i}}(e,t);case n.c_.WINE:return function(e,t){var a;let i=Date.now(),l=[],{extraction:r,formatChecks:s}=t;l.push(_(e,r.brandName)),l.push(S(e,r.fancifulName)),l.push(function(e,t){let a=e.varietal;return t?h(a)?f(a,t)?E(a,t)?{field:"classType",status:n.Gp.SOFT_MISMATCH,expected:a,extracted:t,rule:"PRESENCE + CROSS-CHECK: Class/type (varietal) must match application",details:"Case or formatting difference detected"}:{field:"classType",status:n.Gp.MATCH,expected:a,extracted:t,rule:"PRESENCE + CROSS-CHECK: Class/type (varietal) present and matches application"}:{field:"classType",status:n.Gp.HARD_MISMATCH,expected:a,extracted:t,rule:"PRESENCE + CROSS-CHECK: Class/type (varietal) must match application",details:"Class/type does not match application varietal"}:{field:"classType",status:n.Gp.MATCH,expected:null,extracted:t,rule:"PRESENCE: Class/type designation present on label"}:{field:"classType",status:n.Gp.NOT_FOUND,expected:"Class/type designation required on wine label",extracted:null,rule:"PRESENCE: Class/type designation must appear on wine label",details:"Class/type designation is required on the label"}}(e,r.classType)),l.push(b(r.alcoholContent,n.c_.WINE,{classType:r.classType})),l.push(I(r.netContents,n.c_.WINE)),l.push(O(e,r.producerName,r.producerAddress,{beverageType:n.c_.WINE,producerNamePhrase:r.producerNamePhrase})),l.push(M(r.healthWarningText,s)),l.push(y(e.originType,r.countryOfOrigin)),l.push(function(e,t){let a=e.appellation,i=t.appellation,l=h(t.classType),r=h(t.vintageDate),s=!0===t.isEstateBottled;if((l||r||s)&&!h(i)){let e=[];return l&&e.push("varietal designation"),r&&e.push("vintage date"),s&&e.push("estate bottled"),{field:"appellation",status:n.Gp.NOT_FOUND,expected:a||"Appellation required",extracted:null,rule:"PRESENCE: Appellation required when label contains varietal, vintage, or estate bottled",details:`Appellation required because label contains: ${e.join(", ")}`}}return h(a)||h(i)?h(a)&&!h(i)?{field:"appellation",status:n.Gp.NOT_FOUND,expected:a,extracted:null,rule:"CROSS-CHECK: Appellation in application must appear on label"}:!h(a)&&h(i)?{field:"appellation",status:n.Gp.HARD_MISMATCH,expected:null,extracted:i,rule:"CROSS-CHECK: Appellation on label must be in application",details:"Label contains an appellation not listed in the application"}:f(a,i)?E(a,i)?{field:"appellation",status:n.Gp.SOFT_MISMATCH,expected:a,extracted:i,rule:"CROSS-CHECK: Appellation must match application",details:"Minor formatting difference"}:{field:"appellation",status:n.Gp.MATCH,expected:a,extracted:i,rule:"CROSS-CHECK: Appellation matches application"}:{field:"appellation",status:n.Gp.HARD_MISMATCH,expected:a,extracted:i,rule:"CROSS-CHECK: Appellation must match application",details:"Appellation does not match application"}:{field:"appellation",status:n.Gp.NOT_APPLICABLE,expected:null,extracted:null,rule:"CROSS-CHECK: Appellation not specified in application and not required on label"}}(e,r)),l.push(function(e,t){let a=e.vintageDate,i=h(a),l=h(t);return i||l?i&&!l?{field:"vintageDate",status:n.Gp.NOT_FOUND,expected:a,extracted:null,rule:"CROSS-CHECK: Vintage date in application must appear on label",details:"Application specifies a vintage date but it was not found on the label"}:!i&&l?{field:"vintageDate",status:n.Gp.HARD_MISMATCH,expected:null,extracted:t,rule:"CROSS-CHECK: Vintage date on label must be in application",details:"Label contains a vintage date not listed in the application"}:f(a,t)?E(a,t)?{field:"vintageDate",status:n.Gp.SOFT_MISMATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Vintage date must match application",details:"Minor formatting difference detected"}:{field:"vintageDate",status:n.Gp.MATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Vintage date matches application"}:{field:"vintageDate",status:n.Gp.HARD_MISMATCH,expected:a,extracted:t,rule:"CROSS-CHECK: Vintage date must match application",details:"Vintage dates do not match"}:{field:"vintageDate",status:n.Gp.NOT_APPLICABLE,expected:null,extracted:null,rule:"CROSS-CHECK: Vintage date not specified in application or on label"}}(e,r.vintageDate)),l.push((a=r.sulfiteDeclaration)?{field:"sulfiteDeclaration",status:n.Gp.MATCH,expected:null,extracted:a,rule:"PRESENCE: Sulfite declaration present on label"}:{field:"sulfiteDeclaration",status:n.Gp.NOT_FOUND,expected:"Contains Sulfites",extracted:null,rule:"PRESENCE: Sulfite declaration must appear on wine label"}),l.push(function(e){let t=e.foreignWinePercentage;return!function(e){if(h(e.foreignWinePercentage))return!0;let t=p(e.appellation),a=p(e.countryOfOrigin);for(let e of["france","french","italy","italian","spain","spanish","germany","german","portugal","portuguese","argentina","chile","chilean","australia","australian","new zealand","south africa","austria","austrian","greece","greek"])if(t.includes(e)||a.includes(e))break;return!1}(e)?{field:"foreignWinePercentage",status:n.Gp.NOT_APPLICABLE,expected:null,extracted:t,rule:"PRESENCE: Foreign wine percentage only required if label references foreign wine"}:t?{field:"foreignWinePercentage",status:n.Gp.MATCH,expected:null,extracted:t,rule:"PRESENCE: Foreign wine percentage present on label"}:{field:"foreignWinePercentage",status:n.Gp.NOT_FOUND,expected:'Percentage and origin of foreign wine (e.g., "30% Grape Wine from Italy")',extracted:null,rule:"PRESENCE: Foreign wine percentage required when label references foreign wine",details:"Label appears to reference foreign wine but no percentage statement was found"}}(r));let o=[{field:"colorIngredientDisclosure",value:r.colorIngredientDisclosure,present:h(r.colorIngredientDisclosure)}];return{applicationId:e.id,beverageType:n.c_.WINE,overallStatus:x(l),fieldResults:l,surfacedFields:o,timestamp:new Date().toISOString(),processingTimeMs:Date.now()-i}}(e,t);default:throw Error(`Unknown beverage type: ${e.beverageType}`)}}n.Gp.MATCH,n.Gp.SOFT_MISMATCH,n.Gp.HARD_MISMATCH,n.Gp.NOT_FOUND,n.Gp.NOT_APPLICABLE,n.Gp.SURFACED,n.c_.BEER,n.c_.SPIRITS,n.c_.WINE},6101:(e,t,a)=>{var n,i,l;a.d(t,{F:()=>i,Gp:()=>l,c_:()=>n}),function(e){e.BEER="beer",e.WINE="wine",e.SPIRITS="spirits"}(n||(n={})),function(e){e.DOMESTIC="domestic",e.IMPORTED="imported"}(i||(i={})),function(e){e.MATCH="match",e.SOFT_MISMATCH="soft_mismatch",e.HARD_MISMATCH="hard_mismatch",e.NOT_FOUND="not_found",e.NOT_APPLICABLE="not_applicable",e.SURFACED="surfaced"}(l||(l={}))},307:(e,t,a)=>{a.d(t,{Kz:()=>l,sr:()=>i});var n=a(5066);function i(e,t){try{let a=function(e,t){let a=e=>{let a=t[e];return a?.value||null},n={brandName:a("brand_name"),fancifulName:a("fanciful_name"),classType:a("class_type"),alcoholContent:a("alcohol_content"),netContents:a("net_contents"),producerName:a("producer_name"),producerAddress:a("producer_address"),producerNamePhrase:a("producer_name_phrase"),healthWarningText:a("health_warning"),countryOfOrigin:a("country_of_origin")},i={governmentWarningAllCaps:null,governmentWarningBold:null,surgeonCapitalized:null,generalCapitalized:null};switch(e){case"beer":return{extraction:{...n,colorAdditiveDisclosure:a("color_additive_disclosure"),sulfiteDeclaration:a("sulfite_declaration"),aspartameDeclaration:a("aspartame_declaration")},formatChecks:i,confidenceNotes:null};case"spirits":return{extraction:{...n,ageStatement:a("age_statement"),colorIngredientDisclosure:a("color_ingredient_disclosure"),commodityStatement:a("commodity_statement")},formatChecks:i,confidenceNotes:null};case"wine":return{extraction:{...n,appellation:a("appellation_of_origin"),vintageDate:a("vintage_date"),sulfiteDeclaration:a("sulfite_declaration"),foreignWinePercentage:a("foreign_wine_percentage"),isEstateBottled:null,colorIngredientDisclosure:a("color_ingredient_disclosure")},formatChecks:i,confidenceNotes:null};default:throw Error(`Unknown beverage type: ${e}`)}}(e.beverageType,t),i=(0,n.vS)(e,a);return function(e){let t={};for(let n of e.fieldResults){var a;let e;let i={brandName:"brand_name",fancifulName:"fanciful_name",classType:"class_type",alcoholContent:"alcohol_content",netContents:"net_contents",producerNameAddress:"producer_name_address",healthWarning:"health_warning",countryOfOrigin:"country_of_origin",appellation:"appellation_of_origin",vintageDate:"vintage_date",sulfiteDeclaration:"sulfite_declaration",ageStatement:"age_statement",foreignWinePercentage:"foreign_wine_percentage"}[a=n.field]||a.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,"");switch(n.status){case"match":default:e="match";break;case"soft_mismatch":e="soft_mismatch";break;case"hard_mismatch":case"not_found":e="not_found"===n.status?"not_found":"hard_mismatch";break;case"not_applicable":e="not_applicable"}t[i]={match:"match"===e||"not_applicable"===e,type:e,expected:n.expected||void 0,extracted:n.extracted||void 0}}return t}(i)}catch(e){return console.error("Verification error:",e),{}}}function l(e){let t=Object.values(e),a=t.some(e=>"hard_mismatch"===e.type||"not_found"===e.type),n=t.some(e=>"soft_mismatch"===e.type);return a?"pending":n?"needs_review":"pending"}}};