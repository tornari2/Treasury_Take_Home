(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{1806:function(e,t,r){Promise.resolve().then(r.bind(r,710))},710:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),s=r(2265),i=r(9376),n=r(2869),l=r(4508);let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});c.displayName="Textarea";var o=r(5222),d=r(5613),u=r(8755);let m=(0,u.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),f=(0,u.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),p=(0,u.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function h(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),[r,l]=(0,s.useState)(null),[u,h]=(0,s.useState)(!0),[x,v]=(0,s.useState)(!1),[g,b]=(0,s.useState)("front"),[y,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(1);(0,s.useEffect)(()=>{e.id&&_()},[e.id]);let _=async()=>{try{h(!0);let t=await fetch("/api/applications/".concat(e.id)),r=await t.json();l(r.application),r.application.label_images.length>0&&!r.application.label_images.some(e=>e.verification_result)&&k()}catch(e){console.error("Error fetching application:",e)}finally{h(!1)}},k=async()=>{v(!0);try{(await fetch("/api/applications/".concat(e.id,"/verify"),{method:"POST"})).ok?await _():alert("Verification failed")}catch(e){console.error("Verification error:",e),alert("Error during verification")}finally{v(!1)}},C=async r=>{try{(await fetch("/api/applications/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r,review_notes:y})})).ok?(await _(),("approved"===r||"rejected"===r)&&t.push("/dashboard")):alert("Failed to update status")}catch(e){console.error("Update error:",e),alert("Error updating status")}},z=e=>{if(!e)return"outline";switch(e.type){case"match":return"default";case"soft_mismatch":return"secondary";case"hard_mismatch":case"not_found":return"destructive";default:return"outline"}},R=e=>{if(!e)return null;switch(e.type){case"match":return(0,a.jsx)(m,{className:"h-5 w-5 text-green-600"});case"soft_mismatch":return(0,a.jsx)(f,{className:"h-5 w-5 text-yellow-600"});case"hard_mismatch":case"not_found":return(0,a.jsx)(p,{className:"h-5 w-5 text-red-600"});default:return null}};if(u)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading application..."})});if(!r)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-lg text-red-600",children:"Application not found"})});let A=r.label_images.find(e=>e.image_type===g),E=(null==A?void 0:A.verification_result)||{};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(n.z,{variant:"ghost",onClick:()=>t.push("/dashboard"),className:"mb-4",children:"â† Back to Dashboard"}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Review Application #",r.id]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:r.applicant_name})]}),x&&(0,a.jsx)(d.bZ,{className:"mb-4",children:(0,a.jsx)(d.X,{children:"Verifying application with AI..."})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Label Images"}),(0,a.jsx)("div",{className:"mb-4 flex gap-2",children:r.label_images.map(e=>(0,a.jsx)(n.z,{onClick:()=>b(e.image_type),variant:g===e.image_type?"default":"outline",children:e.image_type},e.id))}),A&&(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Confidence:"," ",A.confidence_score?"".concat((100*A.confidence_score).toFixed(1),"%"):"N/A"]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>w(Math.max(.5,N-.1)),children:"-"}),(0,a.jsxs)("span",{className:"text-sm w-12 text-center",children:[Math.round(100*N),"%"]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>w(Math.min(2,N+.1)),children:"+"})]})]}),(0,a.jsx)("div",{className:"overflow-auto border rounded",children:A.image_data_base64&&(0,a.jsx)("img",{src:"data:".concat(A.mime_type,";base64,").concat(A.image_data_base64),alt:A.image_type,style:{transform:"scale(".concat(N,")"),transformOrigin:"top left"},className:"max-w-full"})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Verification Results"}),0===Object.keys(E).length?(0,a.jsx)("div",{className:"text-muted-foreground",children:'No verification results yet. Click "Verify" to process.'}):(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(E).map(e=>{let[t,r]=e;return(0,a.jsx)(d.bZ,{variant:"destructive"===z(r)?"destructive":"default",className:"border-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[R(r),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold capitalize",children:t.replace(/_/g," ")}),r.expected&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Expected:"})," ",r.expected]}),r.extracted&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Extracted:"})," ",r.extracted]}),"not_found"===r.type&&(0,a.jsx)("div",{className:"text-sm text-destructive mt-1",children:"Field not found on label"})]})]})},t)})}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"review-notes",children:"Review Notes"}),(0,a.jsx)(c,{id:"review-notes",value:y,onChange:e=>j(e.target.value),rows:3,placeholder:"Add notes about this review..."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(n.z,{onClick:()=>C("approved"),className:"flex-1",variant:"default",children:"Approve"}),(0,a.jsx)(n.z,{onClick:()=>C("rejected"),className:"flex-1",variant:"destructive",children:"Reject"}),(0,a.jsx)(n.z,{onClick:()=>C("needs_review"),className:"flex-1",variant:"secondary",children:"Flag for Review"})]})]})]})]})]})})}},5613:function(e,t,r){"use strict";r.d(t,{X:function(){return o},bZ:function(){return c}});var a=r(7437),s=r(2265),i=r(535),n=r(4508);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:s}),r),...i})});c.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...s})});o.displayName="AlertDescription"},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var a=r(7437),s=r(2265),i=r(7053),n=r(535),l=r(4508);let c=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:s,size:n,className:r})),ref:t,...d})});o.displayName="Button"},5222:function(e,t,r){"use strict";r.d(t,{_:function(){return u}});var a=r(7437),s=r(2265);r(4887);var i=r(7053),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.Z8)(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:i,...n}=e,l=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...n,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),l=s.forwardRef((e,t)=>(0,a.jsx)(n.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var c=r(535),o=r(4508);let d=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l,{ref:t,className:(0,o.cn)(d(),r),...s})});u.displayName=l.displayName},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var a=r(1994),s=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},8755:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(2265);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:m,...f}=e;return(0,a.createElement)("svg",{ref:t,...c,width:i,height:i,stroke:r,strokeWidth:l?24*Number(n)/Number(i):n,className:s("lucide",d),...!u&&!o(f)&&{"aria-hidden":"true"},...f},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:c,...o}=r;return(0,a.createElement)(d,{ref:n,iconNode:t,className:s("lucide-".concat(i(l(e))),"lucide-".concat(e),c),...o})});return r.displayName=l(e),r}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[569,971,117,744],function(){return e(e.s=1806)}),_N_E=e.O()}]);